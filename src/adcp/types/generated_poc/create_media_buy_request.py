# generated by datamodel-codegen:
#   filename:  create-media-buy-request.json
#   timestamp: 2025-11-15T17:40:05+00:00

from __future__ import annotations

from enum import Enum
from typing import Any, Literal

from adcp.types.base import AdCPBaseModel
from pydantic import AnyUrl, AwareDatetime, ConfigDict, EmailStr, Field, RootModel


class ReportingFrequency(Enum):
    hourly = 'hourly'
    daily = 'daily'
    monthly = 'monthly'


class RequestedMetric(Enum):
    impressions = 'impressions'
    spend = 'spend'
    clicks = 'clicks'
    ctr = 'ctr'
    video_completions = 'video_completions'
    completion_rate = 'completion_rate'
    conversions = 'conversions'
    viewability = 'viewability'
    engagement_rate = 'engagement_rate'


class FormatId(AdCPBaseModel):
    model_config = ConfigDict(
        extra='forbid',
    )
    agent_url: AnyUrl = Field(
        ...,
        description="URL of the agent that defines this format (e.g., 'https://creatives.adcontextprotocol.org' for standard formats, or 'https://publisher.com/.well-known/adcp/sales' for custom formats)",
    )
    id: str = Field(
        ...,
        description="Format identifier within the agent's namespace (e.g., 'display_300x250', 'video_standard_30s')",
        pattern='^[a-zA-Z0-9_-]+$',
    )


class Pacing(Enum):
    even = 'even'
    asap = 'asap'
    front_loaded = 'front_loaded'


class GeoCountryAnyOfItem(RootModel[str]):
    root: str = Field(..., pattern='^[A-Z]{2}$')


class FrequencyCap(AdCPBaseModel):
    model_config = ConfigDict(
        extra='forbid',
    )
    suppress_minutes: float = Field(..., description='Minutes to suppress after impression', ge=0.0)


class Input(AdCPBaseModel):
    model_config = ConfigDict(
        extra='forbid',
    )
    name: str = Field(..., description='Human-readable name for this preview variant')
    macros: dict[str, str] | None = Field(
        None, description='Macro values to apply for this preview'
    )
    context_description: str | None = Field(
        None, description='Natural language description of the context for AI-generated content'
    )


class ImageAsset(AdCPBaseModel):
    model_config = ConfigDict(
        extra='forbid',
    )
    url: AnyUrl = Field(..., description='URL to the image asset')
    width: int | None = Field(None, description='Image width in pixels', ge=1)
    height: int | None = Field(None, description='Image height in pixels', ge=1)
    format: str | None = Field(None, description='Image file format (jpg, png, gif, webp, etc.)')
    alt_text: str | None = Field(None, description='Alternative text for accessibility')


class VideoAsset(AdCPBaseModel):
    model_config = ConfigDict(
        extra='forbid',
    )
    url: AnyUrl = Field(..., description='URL to the video asset')
    width: int | None = Field(None, description='Video width in pixels', ge=1)
    height: int | None = Field(None, description='Video height in pixels', ge=1)
    duration_ms: int | None = Field(None, description='Video duration in milliseconds', ge=0)
    format: str | None = Field(None, description='Video file format (mp4, webm, mov, etc.)')
    bitrate_kbps: int | None = Field(None, description='Video bitrate in kilobits per second', ge=1)


class AudioAsset(AdCPBaseModel):
    model_config = ConfigDict(
        extra='forbid',
    )
    url: AnyUrl = Field(..., description='URL to the audio asset')
    duration_ms: int | None = Field(None, description='Audio duration in milliseconds', ge=0)
    format: str | None = Field(None, description='Audio file format (mp3, wav, aac, etc.)')
    bitrate_kbps: int | None = Field(None, description='Audio bitrate in kilobits per second', ge=1)


class TextAsset(AdCPBaseModel):
    model_config = ConfigDict(
        extra='forbid',
    )
    content: str = Field(..., description='Text content')
    language: str | None = Field(None, description="Language code (e.g., 'en', 'es', 'fr')")


class HtmlAsset(AdCPBaseModel):
    model_config = ConfigDict(
        extra='forbid',
    )
    content: str = Field(..., description='HTML content')
    version: str | None = Field(None, description="HTML version (e.g., 'HTML5')")


class CssAsset(AdCPBaseModel):
    model_config = ConfigDict(
        extra='forbid',
    )
    content: str = Field(..., description='CSS content')
    media: str | None = Field(None, description="CSS media query context (e.g., 'screen', 'print')")


class ModuleType(Enum):
    esm = 'esm'
    commonjs = 'commonjs'
    script = 'script'


class JavascriptAsset(AdCPBaseModel):
    model_config = ConfigDict(
        extra='forbid',
    )
    content: str = Field(..., description='JavaScript content')
    module_type: ModuleType | None = Field(None, description='JavaScript module type')


class VastVersion(Enum):
    field_2_0 = '2.0'
    field_3_0 = '3.0'
    field_4_0 = '4.0'
    field_4_1 = '4.1'
    field_4_2 = '4.2'


class TrackingEvent(Enum):
    start = 'start'
    firstQuartile = 'firstQuartile'
    midpoint = 'midpoint'
    thirdQuartile = 'thirdQuartile'
    complete = 'complete'
    impression = 'impression'
    click = 'click'
    pause = 'pause'
    resume = 'resume'
    skip = 'skip'
    mute = 'mute'
    unmute = 'unmute'
    fullscreen = 'fullscreen'
    exitFullscreen = 'exitFullscreen'
    playerExpand = 'playerExpand'
    playerCollapse = 'playerCollapse'


class VastAsset1(AdCPBaseModel):
    model_config = ConfigDict(
        extra='forbid',
    )
    delivery_type: Literal['url'] = Field(
        ..., description='Discriminator indicating VAST is delivered via URL endpoint'
    )
    url: AnyUrl = Field(..., description='URL endpoint that returns VAST XML')
    vast_version: VastVersion | None = Field(None, description='VAST specification version')
    vpaid_enabled: bool | None = Field(
        None, description='Whether VPAID (Video Player-Ad Interface Definition) is supported'
    )
    duration_ms: int | None = Field(
        None, description='Expected video duration in milliseconds (if known)', ge=0
    )
    tracking_events: list[TrackingEvent] | None = Field(
        None, description='Tracking events supported by this VAST tag'
    )


class VastAsset2(AdCPBaseModel):
    model_config = ConfigDict(
        extra='forbid',
    )
    delivery_type: Literal['inline'] = Field(
        ..., description='Discriminator indicating VAST is delivered as inline XML content'
    )
    content: str = Field(..., description='Inline VAST XML content')
    vast_version: VastVersion | None = Field(None, description='VAST specification version')
    vpaid_enabled: bool | None = Field(
        None, description='Whether VPAID (Video Player-Ad Interface Definition) is supported'
    )
    duration_ms: int | None = Field(
        None, description='Expected video duration in milliseconds (if known)', ge=0
    )
    tracking_events: list[TrackingEvent] | None = Field(
        None, description='Tracking events supported by this VAST tag'
    )


class VastAsset(RootModel[VastAsset1 | VastAsset2]):
    root: VastAsset1 | VastAsset2 = Field(
        ...,
        description='VAST (Video Ad Serving Template) tag for third-party video ad serving',
        title='VAST Asset',
    )


class DaastVersion(Enum):
    field_1_0 = '1.0'
    field_1_1 = '1.1'


class TrackingEvent2(Enum):
    start = 'start'
    firstQuartile = 'firstQuartile'
    midpoint = 'midpoint'
    thirdQuartile = 'thirdQuartile'
    complete = 'complete'
    impression = 'impression'
    pause = 'pause'
    resume = 'resume'
    skip = 'skip'
    mute = 'mute'
    unmute = 'unmute'


class DaastAsset1(AdCPBaseModel):
    model_config = ConfigDict(
        extra='forbid',
    )
    delivery_type: Literal['url'] = Field(
        ..., description='Discriminator indicating DAAST is delivered via URL endpoint'
    )
    url: AnyUrl = Field(..., description='URL endpoint that returns DAAST XML')
    daast_version: DaastVersion | None = Field(None, description='DAAST specification version')
    duration_ms: int | None = Field(
        None, description='Expected audio duration in milliseconds (if known)', ge=0
    )
    tracking_events: list[TrackingEvent2] | None = Field(
        None, description='Tracking events supported by this DAAST tag'
    )
    companion_ads: bool | None = Field(
        None, description='Whether companion display ads are included'
    )


class DaastAsset2(AdCPBaseModel):
    model_config = ConfigDict(
        extra='forbid',
    )
    delivery_type: Literal['inline'] = Field(
        ..., description='Discriminator indicating DAAST is delivered as inline XML content'
    )
    content: str = Field(..., description='Inline DAAST XML content')
    daast_version: DaastVersion | None = Field(None, description='DAAST specification version')
    duration_ms: int | None = Field(
        None, description='Expected audio duration in milliseconds (if known)', ge=0
    )
    tracking_events: list[TrackingEvent2] | None = Field(
        None, description='Tracking events supported by this DAAST tag'
    )
    companion_ads: bool | None = Field(
        None, description='Whether companion display ads are included'
    )


class DaastAsset(RootModel[DaastAsset1 | DaastAsset2]):
    root: DaastAsset1 | DaastAsset2 = Field(
        ...,
        description='DAAST (Digital Audio Ad Serving Template) tag for third-party audio ad serving',
        title='DAAST Asset',
    )


class Offering(AdCPBaseModel):
    model_config = ConfigDict(
        extra='forbid',
    )
    name: str = Field(..., description="Offering name (e.g., 'Winter Sale', 'New Product Launch')")
    description: str | None = Field(None, description="Description of what's being offered")
    assets: list[dict[str, Any]] | None = Field(
        None, description='Assets specific to this offering'
    )


class AssetType(Enum):
    image = 'image'
    video = 'video'
    audio = 'audio'
    vast = 'vast'
    daast = 'daast'
    text = 'text'
    url = 'url'
    html = 'html'
    css = 'css'
    javascript = 'javascript'
    webhook = 'webhook'


class AssetSelectors(AdCPBaseModel):
    model_config = ConfigDict(
        extra='forbid',
    )
    tags: list[str] | None = Field(
        None, description="Select assets with specific tags (e.g., ['holiday', 'premium'])"
    )
    asset_types: list[AssetType] | None = Field(
        None, description="Filter by asset type (e.g., ['image', 'video'])"
    )
    exclude_tags: list[str] | None = Field(None, description='Exclude assets with these tags')


class Logo(AdCPBaseModel):
    url: AnyUrl = Field(..., description='URL to the logo asset')
    tags: list[str] | None = Field(
        None,
        description="Semantic tags describing the logo variant (e.g., 'dark', 'light', 'square', 'horizontal', 'icon')",
    )
    width: int | None = Field(None, description='Logo width in pixels')
    height: int | None = Field(None, description='Logo height in pixels')


class Colors(AdCPBaseModel):
    primary: str | None = Field(
        None, description='Primary brand color (hex format)', pattern='^#[0-9A-Fa-f]{6}$'
    )
    secondary: str | None = Field(
        None, description='Secondary brand color (hex format)', pattern='^#[0-9A-Fa-f]{6}$'
    )
    accent: str | None = Field(
        None, description='Accent color (hex format)', pattern='^#[0-9A-Fa-f]{6}$'
    )
    background: str | None = Field(
        None, description='Background color (hex format)', pattern='^#[0-9A-Fa-f]{6}$'
    )
    text: str | None = Field(
        None, description='Text color (hex format)', pattern='^#[0-9A-Fa-f]{6}$'
    )


class Fonts(AdCPBaseModel):
    primary: str | None = Field(None, description='Primary font family name')
    secondary: str | None = Field(None, description='Secondary font family name')
    font_urls: list[AnyUrl] | None = Field(
        None, description='URLs to web font files if using custom fonts'
    )


class AssetType1(Enum):
    image = 'image'
    video = 'video'
    audio = 'audio'
    text = 'text'


class Asset(AdCPBaseModel):
    model_config = ConfigDict(
        extra='forbid',
    )
    asset_id: str = Field(..., description='Unique identifier for this asset')
    asset_type: AssetType1 = Field(..., description='Type of asset')
    url: AnyUrl = Field(..., description='URL to CDN-hosted asset file')
    tags: list[str] | None = Field(
        None, description="Tags for asset discovery (e.g., 'holiday', 'lifestyle', 'product_shot')"
    )
    name: str | None = Field(None, description='Human-readable asset name')
    description: str | None = Field(None, description='Asset description or usage notes')
    width: int | None = Field(None, description='Image/video width in pixels')
    height: int | None = Field(None, description='Image/video height in pixels')
    duration_seconds: float | None = Field(None, description='Video/audio duration in seconds')
    file_size_bytes: int | None = Field(None, description='File size in bytes')
    format: str | None = Field(None, description="File format (e.g., 'jpg', 'mp4', 'mp3')")
    metadata: dict[str, Any] | None = Field(None, description='Additional asset-specific metadata')


class FeedFormat(Enum):
    google_merchant_center = 'google_merchant_center'
    facebook_catalog = 'facebook_catalog'
    custom = 'custom'


class UpdateFrequency(Enum):
    realtime = 'realtime'
    hourly = 'hourly'
    daily = 'daily'
    weekly = 'weekly'


class ProductCatalog(AdCPBaseModel):
    model_config = ConfigDict(
        extra='forbid',
    )
    feed_url: AnyUrl = Field(..., description='URL to product catalog feed')
    feed_format: FeedFormat | None = Field(
        'google_merchant_center', description='Format of the product feed'
    )
    categories: list[str] | None = Field(
        None, description='Product categories available in the catalog (for filtering)'
    )
    last_updated: AwareDatetime | None = Field(
        None, description='When the product catalog was last updated'
    )
    update_frequency: UpdateFrequency | None = Field(
        None, description='How frequently the product catalog is updated'
    )


class Disclaimer(AdCPBaseModel):
    text: str = Field(..., description='Disclaimer text')
    context: str | None = Field(
        None,
        description="When this disclaimer applies (e.g., 'financial_products', 'health_claims', 'all')",
    )
    required: bool | None = Field(True, description='Whether this disclaimer must appear')


class Contact(AdCPBaseModel):
    email: EmailStr | None = Field(None, description='Contact email')
    phone: str | None = Field(None, description='Contact phone number')


class Metadata(AdCPBaseModel):
    created_date: AwareDatetime | None = Field(
        None, description='When this brand manifest was created'
    )
    updated_date: AwareDatetime | None = Field(
        None, description='When this brand manifest was last updated'
    )
    version: str | None = Field(None, description='Brand card version number')


class BrandManifest1(AdCPBaseModel):
    model_config = ConfigDict(
        extra='forbid',
    )
    url: AnyUrl = Field(
        ...,
        description='Primary brand URL for context and asset discovery. Creative agents can infer brand information from this URL.',
    )
    name: str | None = Field(None, description='Brand or business name')
    logos: list[Logo] | None = Field(
        None, description='Brand logo assets with semantic tags for different use cases'
    )
    colors: Colors | None = Field(None, description='Brand color palette')
    fonts: Fonts | None = Field(None, description='Brand typography guidelines')
    tone: str | None = Field(
        None,
        description="Brand voice and messaging tone (e.g., 'professional', 'casual', 'humorous', 'trustworthy', 'innovative')",
    )
    tagline: str | None = Field(None, description='Brand tagline or slogan')
    assets: list[Asset] | None = Field(
        None,
        description='Brand asset library with explicit assets and tags. Assets are referenced inline with URLs pointing to CDN-hosted files.',
    )
    product_catalog: ProductCatalog | None = Field(
        None,
        description='Product catalog information for e-commerce advertisers. Enables SKU-level creative generation and product selection.',
    )
    disclaimers: list[Disclaimer] | None = Field(
        None, description='Legal disclaimers or required text that must appear in creatives'
    )
    industry: str | None = Field(
        None,
        description="Industry or vertical (e.g., 'retail', 'automotive', 'finance', 'healthcare')",
    )
    target_audience: str | None = Field(None, description='Primary target audience description')
    contact: Contact | None = Field(None, description='Brand contact information')
    metadata: Metadata | None = Field(None, description='Additional brand metadata')


class Asset1(AdCPBaseModel):
    model_config = ConfigDict(
        extra='forbid',
    )
    asset_id: str = Field(..., description='Unique identifier for this asset')
    asset_type: AssetType1 = Field(..., description='Type of asset')
    url: AnyUrl = Field(..., description='URL to CDN-hosted asset file')
    tags: list[str] | None = Field(
        None, description="Tags for asset discovery (e.g., 'holiday', 'lifestyle', 'product_shot')"
    )
    name: str | None = Field(None, description='Human-readable asset name')
    description: str | None = Field(None, description='Asset description or usage notes')
    width: int | None = Field(None, description='Image/video width in pixels')
    height: int | None = Field(None, description='Image/video height in pixels')
    duration_seconds: float | None = Field(None, description='Video/audio duration in seconds')
    file_size_bytes: int | None = Field(None, description='File size in bytes')
    format: str | None = Field(None, description="File format (e.g., 'jpg', 'mp4', 'mp3')")
    metadata: dict[str, Any] | None = Field(None, description='Additional asset-specific metadata')


class ProductCatalog1(AdCPBaseModel):
    model_config = ConfigDict(
        extra='forbid',
    )
    feed_url: AnyUrl = Field(..., description='URL to product catalog feed')
    feed_format: FeedFormat | None = Field(
        'google_merchant_center', description='Format of the product feed'
    )
    categories: list[str] | None = Field(
        None, description='Product categories available in the catalog (for filtering)'
    )
    last_updated: AwareDatetime | None = Field(
        None, description='When the product catalog was last updated'
    )
    update_frequency: UpdateFrequency | None = Field(
        None, description='How frequently the product catalog is updated'
    )


class BrandManifest2(AdCPBaseModel):
    model_config = ConfigDict(
        extra='forbid',
    )
    url: AnyUrl | None = Field(
        None,
        description='Primary brand URL for context and asset discovery. Creative agents can infer brand information from this URL.',
    )
    name: str = Field(..., description='Brand or business name')
    logos: list[Logo] | None = Field(
        None, description='Brand logo assets with semantic tags for different use cases'
    )
    colors: Colors | None = Field(None, description='Brand color palette')
    fonts: Fonts | None = Field(None, description='Brand typography guidelines')
    tone: str | None = Field(
        None,
        description="Brand voice and messaging tone (e.g., 'professional', 'casual', 'humorous', 'trustworthy', 'innovative')",
    )
    tagline: str | None = Field(None, description='Brand tagline or slogan')
    assets: list[Asset1] | None = Field(
        None,
        description='Brand asset library with explicit assets and tags. Assets are referenced inline with URLs pointing to CDN-hosted files.',
    )
    product_catalog: ProductCatalog1 | None = Field(
        None,
        description='Product catalog information for e-commerce advertisers. Enables SKU-level creative generation and product selection.',
    )
    disclaimers: list[Disclaimer] | None = Field(
        None, description='Legal disclaimers or required text that must appear in creatives'
    )
    industry: str | None = Field(
        None,
        description="Industry or vertical (e.g., 'retail', 'automotive', 'finance', 'healthcare')",
    )
    target_audience: str | None = Field(None, description='Primary target audience description')
    contact: Contact | None = Field(None, description='Brand contact information')
    metadata: Metadata | None = Field(None, description='Additional brand metadata')


class BrandManifest(RootModel[BrandManifest1 | BrandManifest2]):
    root: BrandManifest1 | BrandManifest2 = Field(
        ...,
        description='Standardized brand information manifest for creative generation and media buying. Enables low-friction creative workflows by providing brand context that can be easily cached and shared across requests.',
        examples=[
            {
                'description': 'Example with both URL and name',
                'data': {'url': 'https://bobsfunburgers.com', 'name': "Bob's Fun Burgers"},
            },
            {
                'description': 'Example: white-label brand without dedicated URL',
                'data': {
                    'name': 'Great Value',
                    'colors': {'primary': '#0071CE', 'secondary': '#FFC220'},
                    'tone': 'affordable and trustworthy',
                },
            },
            {
                'description': 'Full brand manifest with all fields',
                'data': {
                    'url': 'https://acmecorp.com',
                    'name': 'ACME Corporation',
                    'logos': [
                        {
                            'url': 'https://cdn.acmecorp.com/logo-square-dark.png',
                            'tags': ['dark', 'square'],
                            'width': 512,
                            'height': 512,
                        },
                        {
                            'url': 'https://cdn.acmecorp.com/logo-horizontal-light.png',
                            'tags': ['light', 'horizontal'],
                            'width': 1200,
                            'height': 400,
                        },
                    ],
                    'colors': {
                        'primary': '#FF6B35',
                        'secondary': '#004E89',
                        'accent': '#F7931E',
                        'background': '#FFFFFF',
                        'text': '#1A1A1A',
                    },
                    'fonts': {'primary': 'Helvetica Neue', 'secondary': 'Georgia'},
                    'tone': 'professional and trustworthy',
                    'tagline': 'Innovation You Can Trust',
                    'assets': [
                        {
                            'asset_id': 'hero_winter_2024',
                            'asset_type': 'image',
                            'url': 'https://cdn.acmecorp.com/hero-winter-2024.jpg',
                            'tags': ['hero', 'winter', 'holiday', 'lifestyle'],
                            'name': 'Winter Campaign Hero',
                            'width': 1920,
                            'height': 1080,
                            'format': 'jpg',
                        },
                        {
                            'asset_id': 'product_video_30s',
                            'asset_type': 'video',
                            'url': 'https://cdn.acmecorp.com/product-demo-30s.mp4',
                            'tags': ['product', 'demo', '30s'],
                            'name': 'Product Demo 30 Second',
                            'width': 1920,
                            'height': 1080,
                            'duration_seconds': 30,
                            'format': 'mp4',
                        },
                    ],
                    'product_catalog': {
                        'feed_url': 'https://acmecorp.com/products.xml',
                        'feed_format': 'google_merchant_center',
                        'categories': ['electronics/computers', 'electronics/accessories'],
                        'last_updated': '2024-03-15T10:00:00Z',
                        'update_frequency': 'hourly',
                    },
                    'disclaimers': [
                        {
                            'text': 'Results may vary. Consult a professional before use.',
                            'context': 'health_claims',
                            'required': True,
                        }
                    ],
                    'industry': 'technology',
                    'target_audience': 'business decision-makers aged 35-55',
                },
            },
        ],
        title='Brand Manifest',
    )


class PromotedProducts(AdCPBaseModel):
    model_config = ConfigDict(
        extra='forbid',
    )
    manifest_skus: list[str] | None = Field(
        None, description='Direct product SKU references from the brand manifest product catalog'
    )
    manifest_tags: list[str] | None = Field(
        None,
        description="Select products by tags from the brand manifest product catalog (e.g., 'organic', 'sauces', 'holiday')",
    )
    manifest_category: str | None = Field(
        None,
        description="Select products from a specific category in the brand manifest product catalog (e.g., 'beverages/soft-drinks', 'food/sauces')",
    )
    manifest_query: str | None = Field(
        None,
        description="Natural language query to select products from the brand manifest (e.g., 'all Kraft Heinz pasta sauces', 'organic products under $20')",
    )


class UrlType(Enum):
    clickthrough = 'clickthrough'
    tracker_pixel = 'tracker_pixel'
    tracker_script = 'tracker_script'


class UrlAsset(AdCPBaseModel):
    model_config = ConfigDict(
        extra='forbid',
    )
    url: AnyUrl = Field(..., description='URL reference')
    url_type: UrlType | None = Field(
        None,
        description="Type of URL asset: 'clickthrough' for user click destination (landing page), 'tracker_pixel' for impression/event tracking via HTTP request (fires GET, expects pixel/204 response), 'tracker_script' for measurement SDKs that must load as <script> tag (OMID verification, native event trackers using method:2)",
    )
    description: str | None = Field(None, description='Description of what this URL points to')


class StartTiming(RootModel[str | AwareDatetime]):
    root: str | AwareDatetime = Field(
        ..., description="Campaign start timing: 'asap' or ISO 8601 date-time", title='Start Timing'
    )


class Scheme(Enum):
    Bearer = 'Bearer'
    HMAC_SHA256 = 'HMAC-SHA256'


class Authentication(AdCPBaseModel):
    model_config = ConfigDict(
        extra='forbid',
    )
    schemes: list[Scheme] = Field(
        ...,
        description="Array of authentication schemes. Supported: ['Bearer'] for simple token auth, ['HMAC-SHA256'] for signature verification (recommended for production)",
        max_length=1,
        min_length=1,
    )
    credentials: str = Field(
        ...,
        description='Credentials for authentication. For Bearer: token sent in Authorization header. For HMAC-SHA256: shared secret used to generate signature. Minimum 32 characters. Exchanged out-of-band during onboarding.',
        min_length=32,
    )


class PushNotificationConfig(AdCPBaseModel):
    model_config = ConfigDict(
        extra='forbid',
    )
    url: AnyUrl = Field(..., description='Webhook endpoint URL for task status notifications')
    token: str | None = Field(
        None,
        description='Optional client-provided token for webhook validation. Echoed back in webhook payload to validate request authenticity.',
        min_length=16,
    )
    authentication: Authentication = Field(
        ..., description='Authentication configuration for webhook delivery (A2A-compatible)'
    )


class ReportingWebhook(PushNotificationConfig):
    reporting_frequency: ReportingFrequency = Field(
        ...,
        description='Frequency for automated reporting delivery. Must be supported by all products in the media buy.',
    )
    requested_metrics: list[RequestedMetric] | None = Field(
        None,
        description="Optional list of metrics to include in webhook notifications. If omitted, all available metrics are included. Must be subset of product's available_metrics.",
    )


class Targeting(AdCPBaseModel):
    model_config = ConfigDict(
        extra='forbid',
    )
    geo_country_any_of: list[GeoCountryAnyOfItem] | None = Field(
        None,
        description='Restrict delivery to specific countries (ISO codes). Use for regulatory compliance or RCT testing.',
    )
    geo_region_any_of: list[str] | None = Field(
        None,
        description='Restrict delivery to specific regions/states. Use for regulatory compliance or RCT testing.',
    )
    geo_metro_any_of: list[str] | None = Field(
        None,
        description='Restrict delivery to specific metro areas (DMA codes). Use for regulatory compliance or RCT testing.',
    )
    geo_postal_code_any_of: list[str] | None = Field(
        None,
        description='Restrict delivery to specific postal/ZIP codes. Use for regulatory compliance or RCT testing.',
    )
    axe_include_segment: str | None = Field(
        None, description='AXE segment ID to include for targeting'
    )
    axe_exclude_segment: str | None = Field(
        None, description='AXE segment ID to exclude from targeting'
    )
    frequency_cap: FrequencyCap | None = None


class BrandManifestRef(RootModel[BrandManifest | AnyUrl]):
    root: BrandManifest | AnyUrl = Field(
        ...,
        description='Brand manifest provided either as an inline object or a URL string pointing to a hosted manifest',
        examples=[
            {
                'description': 'Inline brand manifest',
                'data': {
                    'url': 'https://acmecorp.com',
                    'name': 'ACME Corporation',
                    'colors': {'primary': '#FF6B35'},
                },
            },
            {
                'description': 'URL string reference to hosted manifest',
                'data': 'https://cdn.acmecorp.com/brand-manifest.json',
            },
        ],
        title='Brand Manifest Reference',
    )


class PromotedOfferings(AdCPBaseModel):
    model_config = ConfigDict(
        extra='forbid',
    )
    brand_manifest: BrandManifestRef = Field(
        ...,
        description='Brand information manifest containing assets, themes, and guidelines. Can be provided inline or as a URL reference to a hosted manifest.',
    )
    product_selectors: PromotedProducts | None = Field(
        None,
        description='Selectors to choose which products/offerings from the brand manifest product catalog to promote',
    )
    offerings: list[Offering] | None = Field(
        None,
        description='Inline offerings for campaigns without a product catalog. Each offering has a name, description, and associated assets.',
    )
    asset_selectors: AssetSelectors | None = Field(
        None, description='Selectors to choose specific assets from the brand manifest'
    )


class CreativeAsset(AdCPBaseModel):
    model_config = ConfigDict(
        extra='forbid',
    )
    creative_id: str = Field(..., description='Unique identifier for the creative')
    name: str = Field(..., description='Human-readable creative name')
    format_id: FormatId = Field(
        ..., description='Format identifier specifying which format this creative conforms to'
    )
    assets: dict[
        str,
        ImageAsset
        | VideoAsset
        | AudioAsset
        | TextAsset
        | HtmlAsset
        | CssAsset
        | JavascriptAsset
        | VastAsset
        | DaastAsset
        | PromotedOfferings
        | UrlAsset,
    ] = Field(..., description='Assets required by the format, keyed by asset_role')
    inputs: list[Input] | None = Field(
        None,
        description='Preview contexts for generative formats - defines what scenarios to generate previews for',
    )
    tags: list[str] | None = Field(
        None, description='User-defined tags for organization and searchability'
    )
    approved: bool | None = Field(
        None,
        description='For generative creatives: set to true to approve and finalize, false to request regeneration with updated assets/message. Omit for non-generative creatives.',
    )


class PackageRequest(AdCPBaseModel):
    model_config = ConfigDict(
        extra='forbid',
    )
    buyer_ref: str = Field(..., description="Buyer's reference identifier for this package")
    product_id: str = Field(..., description='Product ID for this package')
    format_ids: list[FormatId] | None = Field(
        None,
        description='Array of format IDs that will be used for this package - must be supported by the product. If omitted, defaults to all formats supported by the product.',
        min_length=1,
    )
    budget: float = Field(
        ..., description="Budget allocation for this package in the media buy's currency", ge=0.0
    )
    pacing: Pacing | None = None
    pricing_option_id: str = Field(
        ...,
        description="ID of the selected pricing option from the product's pricing_options array",
    )
    bid_price: float | None = Field(
        None,
        description='Bid price for auction-based CPM pricing (required if using cpm-auction-option)',
        ge=0.0,
    )
    targeting_overlay: Targeting | None = None
    creative_ids: list[str] | None = Field(
        None,
        description='Creative IDs to assign to this package at creation time (references existing library creatives)',
    )
    creatives: list[CreativeAsset] | None = Field(
        None,
        description='Full creative objects to upload and assign to this package at creation time (alternative to creative_ids - creatives will be added to library). Supports both static and generative creatives.',
        max_length=100,
    )


class CreateMediaBuyRequest(AdCPBaseModel):
    model_config = ConfigDict(
        extra='forbid',
    )
    buyer_ref: str = Field(..., description="Buyer's reference identifier for this media buy")
    packages: list[PackageRequest] = Field(..., description='Array of package configurations')
    brand_manifest: BrandManifestRef = Field(
        ...,
        description='Brand information manifest serving as the namespace and identity for this media buy. Provides brand context, assets, and product catalog. Can be provided inline or as a URL reference to a hosted manifest. Can be cached and reused across multiple requests.',
    )
    po_number: str | None = Field(None, description='Purchase order number for tracking')
    start_time: StartTiming
    end_time: AwareDatetime = Field(..., description='Campaign end date/time in ISO 8601 format')
    reporting_webhook: ReportingWebhook | None = None
    context: dict[str, Any] | None = Field(
        None,
        description='Initiator-provided context included in the request payload. Agentsmust echo this value back unchanged in responses and webhooks. Use for UI/session hints, correlation tokens, or tracking metadata.',
    )
