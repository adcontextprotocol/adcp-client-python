# generated by datamodel-codegen:
#   filename:  performance-feedback.json
#   timestamp: 2025-11-15T17:40:56+00:00

from __future__ import annotations

from enum import Enum

from adcp.types.base import AdCPBaseModel
from pydantic import AwareDatetime, ConfigDict, Field


class MeasurementPeriod(AdCPBaseModel):
    model_config = ConfigDict(
        extra='forbid',
    )
    start: AwareDatetime = Field(..., description='ISO 8601 start timestamp for measurement period')
    end: AwareDatetime = Field(..., description='ISO 8601 end timestamp for measurement period')


class MetricType(Enum):
    overall_performance = 'overall_performance'
    conversion_rate = 'conversion_rate'
    brand_lift = 'brand_lift'
    click_through_rate = 'click_through_rate'
    completion_rate = 'completion_rate'
    viewability = 'viewability'
    brand_safety = 'brand_safety'
    cost_efficiency = 'cost_efficiency'


class FeedbackSource(Enum):
    buyer_attribution = 'buyer_attribution'
    third_party_measurement = 'third_party_measurement'
    platform_analytics = 'platform_analytics'
    verification_partner = 'verification_partner'


class Status(Enum):
    accepted = 'accepted'
    queued = 'queued'
    applied = 'applied'
    rejected = 'rejected'


class PerformanceFeedback(AdCPBaseModel):
    model_config = ConfigDict(
        extra='forbid',
    )
    feedback_id: str = Field(
        ..., description='Unique identifier for this performance feedback submission'
    )
    media_buy_id: str = Field(..., description="Publisher's media buy identifier")
    package_id: str | None = Field(
        None, description='Specific package within the media buy (if feedback is package-specific)'
    )
    creative_id: str | None = Field(
        None, description='Specific creative asset (if feedback is creative-specific)'
    )
    measurement_period: MeasurementPeriod = Field(
        ..., description='Time period for performance measurement'
    )
    performance_index: float = Field(
        ...,
        description='Normalized performance score (0.0 = no value, 1.0 = expected, >1.0 = above expected)',
        ge=0.0,
    )
    metric_type: MetricType = Field(..., description='The business metric being measured')
    feedback_source: FeedbackSource = Field(..., description='Source of the performance data')
    status: Status = Field(..., description='Processing status of the performance feedback')
    submitted_at: AwareDatetime = Field(
        ..., description='ISO 8601 timestamp when feedback was submitted'
    )
    applied_at: AwareDatetime | None = Field(
        None, description='ISO 8601 timestamp when feedback was applied to optimization algorithms'
    )
