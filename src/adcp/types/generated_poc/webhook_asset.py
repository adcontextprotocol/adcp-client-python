# generated by datamodel-codegen:
#   filename:  webhook-asset.json
#   timestamp: 2025-11-15T17:41:40+00:00

from __future__ import annotations

from enum import Enum

from adcp.types.base import AdCPBaseModel
from pydantic import AnyUrl, ConfigDict, Field


class Method(Enum):
    GET = 'GET'
    POST = 'POST'


class ResponseType(Enum):
    html = 'html'
    json = 'json'
    xml = 'xml'
    javascript = 'javascript'


class Method1(Enum):
    hmac_sha256 = 'hmac_sha256'
    api_key = 'api_key'
    none = 'none'


class Security(AdCPBaseModel):
    method: Method1 = Field(..., description='Authentication method')
    hmac_header: str | None = Field(
        None, description="Header name for HMAC signature (e.g., 'X-Signature')"
    )
    api_key_header: str | None = Field(
        None, description="Header name for API key (e.g., 'X-API-Key')"
    )


class WebhookAsset(AdCPBaseModel):
    model_config = ConfigDict(
        extra='forbid',
    )
    url: AnyUrl = Field(..., description='Webhook URL to call for dynamic content')
    method: Method | None = Field('POST', description='HTTP method')
    timeout_ms: int | None = Field(
        500, description='Maximum time to wait for response in milliseconds', ge=10, le=5000
    )
    supported_macros: list[str] | None = Field(
        None,
        description='Universal macros that can be passed to webhook (e.g., {DEVICE_TYPE}, {COUNTRY})',
    )
    required_macros: list[str] | None = Field(
        None, description='Universal macros that must be provided for webhook to function'
    )
    response_type: ResponseType = Field(
        ..., description='Expected content type of webhook response'
    )
    security: Security = Field(..., description='Security configuration for webhook calls')
