# generated by datamodel-codegen:
#   filename:  adagents.json
#   timestamp: 2025-11-15T17:39:49+00:00

from __future__ import annotations

from enum import Enum

from adcp.types.base import AdCPBaseModel
from pydantic import AnyUrl, AwareDatetime, ConfigDict, EmailStr, Field, RootModel


class Contact(AdCPBaseModel):
    model_config = ConfigDict(
        extra='forbid',
    )
    name: str = Field(
        ...,
        description="Name of the entity managing this file (e.g., 'Meta Advertising Operations', 'Clear Channel Digital')",
        max_length=255,
        min_length=1,
    )
    email: EmailStr | None = Field(
        None,
        description='Contact email for questions or issues with this authorization file',
        max_length=255,
        min_length=1,
    )
    domain: str | None = Field(
        None,
        description='Primary domain of the entity managing this file',
        pattern='^[a-z0-9]([a-z0-9-]*[a-z0-9])?(\\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$',
    )
    seller_id: str | None = Field(
        None,
        description='Seller ID from IAB Tech Lab sellers.json (if applicable)',
        max_length=255,
        min_length=1,
    )
    tag_id: str | None = Field(
        None,
        description='TAG Certified Against Fraud ID for verification (if applicable)',
        max_length=100,
        min_length=1,
    )


class Tags(AdCPBaseModel):
    model_config = ConfigDict(
        extra='forbid',
    )
    name: str = Field(..., description='Human-readable name for this tag')
    description: str = Field(..., description='Description of what this tag represents')


class PropertyId(RootModel[str]):
    root: str = Field(..., pattern='^[a-z0-9_]+$')


class PropertyTag(RootModel[str]):
    root: str = Field(..., pattern='^[a-z0-9_]+$')


class PublisherProperty(AdCPBaseModel):
    model_config = ConfigDict(
        extra='forbid',
    )
    publisher_domain: str = Field(
        ...,
        description="Domain where the publisher's adagents.json is hosted (e.g., 'cnn.com')",
        pattern='^[a-z0-9]([a-z0-9-]*[a-z0-9])?(\\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$',
    )
    property_ids: list[PropertyId] | None = Field(
        None,
        description="Specific property IDs from the publisher's adagents.json properties array. Mutually exclusive with property_tags.",
        min_length=1,
    )
    property_tags: list[PropertyTag] | None = Field(
        None,
        description="Property tags from the publisher's adagents.json tags. Agent is authorized for all properties with these tags. Mutually exclusive with property_ids.",
        min_length=1,
    )


class PropertyType(Enum):
    website = 'website'
    mobile_app = 'mobile_app'
    ctv_app = 'ctv_app'
    dooh = 'dooh'
    podcast = 'podcast'
    radio = 'radio'
    streaming_audio = 'streaming_audio'


class Tag(RootModel[str]):
    root: str = Field(
        ...,
        description="Lowercase tag with underscores (e.g., 'conde_nast_network', 'premium_content')",
        pattern='^[a-z0-9_]+$',
    )


class IdentifierTypes(Enum):
    domain = 'domain'
    subdomain = 'subdomain'
    network_id = 'network_id'
    ios_bundle = 'ios_bundle'
    android_package = 'android_package'
    apple_app_store_id = 'apple_app_store_id'
    google_play_id = 'google_play_id'
    roku_store_id = 'roku_store_id'
    fire_tv_asin = 'fire_tv_asin'
    samsung_app_id = 'samsung_app_id'
    apple_tv_bundle = 'apple_tv_bundle'
    bundle_id = 'bundle_id'
    venue_id = 'venue_id'
    screen_id = 'screen_id'
    openooh_venue_type = 'openooh_venue_type'
    rss_url = 'rss_url'
    apple_podcast_id = 'apple_podcast_id'
    spotify_show_id = 'spotify_show_id'
    podcast_guid = 'podcast_guid'


class Identifier(AdCPBaseModel):
    model_config = ConfigDict(
        extra='forbid',
    )
    type: IdentifierTypes = Field(..., description='Type of identifier for this property')
    value: str = Field(
        ...,
        description="The identifier value. For domain type: 'example.com' matches base domain plus www and m subdomains; 'edition.example.com' matches that specific subdomain; '*.example.com' matches ALL subdomains but NOT base domain",
    )


class Property(AdCPBaseModel):
    model_config = ConfigDict(
        extra='forbid',
    )
    property_id: str | None = Field(
        None,
        description="Unique identifier for this property (optional). Enables referencing properties by ID instead of repeating full objects. Recommended format: lowercase with underscores (e.g., 'cnn_ctv_app', 'instagram_mobile')",
        pattern='^[a-z0-9_]+$',
    )
    property_type: PropertyType = Field(..., description='Type of advertising property')
    name: str = Field(..., description='Human-readable property name')
    identifiers: list[Identifier] = Field(
        ..., description='Array of identifiers for this property', min_length=1
    )
    tags: list[Tag] | None = Field(
        None,
        description='Tags for categorization and grouping (e.g., network membership, content categories)',
    )
    publisher_domain: str | None = Field(
        None,
        description='Domain where adagents.json should be checked for authorization validation. Required for list_authorized_properties response. Optional in adagents.json (file location implies domain).',
    )


class AuthorizedAgent(AdCPBaseModel):
    model_config = ConfigDict(
        extra='forbid',
    )
    url: AnyUrl = Field(..., description="The authorized agent's API endpoint URL")
    authorized_for: str = Field(
        ...,
        description='Human-readable description of what this agent is authorized to sell',
        max_length=500,
        min_length=1,
    )
    property_ids: list[PropertyId] | None = Field(
        None,
        description='Property IDs this agent is authorized for. Resolved against the top-level properties array in this file. Mutually exclusive with property_tags and properties fields.',
        min_length=1,
    )
    property_tags: list[PropertyTag] | None = Field(
        None,
        description='Tags identifying which properties this agent is authorized for. Resolved against the top-level properties array in this file using tag matching. Mutually exclusive with property_ids and properties fields.',
        min_length=1,
    )
    properties: list[Property] | None = Field(
        None,
        description='Specific properties this agent is authorized for (alternative to property_ids/property_tags). Mutually exclusive with property_ids and property_tags fields.',
        min_length=1,
    )
    publisher_properties: list[PublisherProperty] | None = Field(
        None,
        description='Properties from other publisher domains this agent is authorized for. Each entry specifies a publisher domain and which of their properties this agent can sell (by property_id or property_tags). Mutually exclusive with property_ids, property_tags, and properties fields.',
        min_length=1,
    )


class AuthorizedSalesAgents(AdCPBaseModel):
    model_config = ConfigDict(
        extra='forbid',
    )
    field_schema: str | None = Field(
        'https://adcontextprotocol.org/schemas/v1/adagents.json',
        alias='$schema',
        description='JSON Schema identifier for this adagents.json file',
    )
    contact: Contact | None = Field(
        None,
        description='Contact information for the entity managing this adagents.json file (may be publisher or third-party operator)',
    )
    properties: list[Property] | None = Field(
        None,
        description='Array of all properties covered by this adagents.json file. Same structure as list_authorized_properties response.',
        min_length=1,
    )
    tags: dict[str, Tags] | None = Field(
        None,
        description='Metadata for each tag referenced by properties. Same structure as list_authorized_properties response.',
    )
    authorized_agents: list[AuthorizedAgent] = Field(
        ...,
        description='Array of sales agents authorized to sell inventory for properties in this file',
        min_length=1,
    )
    last_updated: AwareDatetime | None = Field(
        None, description='ISO 8601 timestamp indicating when this file was last updated'
    )
