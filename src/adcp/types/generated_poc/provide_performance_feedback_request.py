# generated by datamodel-codegen:
#   filename:  provide-performance-feedback-request.json
#   timestamp: 2025-11-15T17:41:10+00:00

from __future__ import annotations

from enum import Enum
from typing import Any

from adcp.types.base import AdCPBaseModel
from pydantic import AwareDatetime, ConfigDict, Field


class MeasurementPeriod(AdCPBaseModel):
    model_config = ConfigDict(
        extra='forbid',
    )
    start: AwareDatetime = Field(..., description='ISO 8601 start timestamp for measurement period')
    end: AwareDatetime = Field(..., description='ISO 8601 end timestamp for measurement period')


class MetricType(Enum):
    overall_performance = 'overall_performance'
    conversion_rate = 'conversion_rate'
    brand_lift = 'brand_lift'
    click_through_rate = 'click_through_rate'
    completion_rate = 'completion_rate'
    viewability = 'viewability'
    brand_safety = 'brand_safety'
    cost_efficiency = 'cost_efficiency'


class FeedbackSource(Enum):
    buyer_attribution = 'buyer_attribution'
    third_party_measurement = 'third_party_measurement'
    platform_analytics = 'platform_analytics'
    verification_partner = 'verification_partner'


class ProvidePerformanceFeedbackRequest(AdCPBaseModel):
    model_config = ConfigDict(
        extra='forbid',
    )
    media_buy_id: str = Field(..., description="Publisher's media buy identifier", min_length=1)
    measurement_period: MeasurementPeriod = Field(
        ..., description='Time period for performance measurement'
    )
    performance_index: float = Field(
        ...,
        description='Normalized performance score (0.0 = no value, 1.0 = expected, >1.0 = above expected)',
        ge=0.0,
    )
    package_id: str | None = Field(
        None,
        description='Specific package within the media buy (if feedback is package-specific)',
        min_length=1,
    )
    creative_id: str | None = Field(
        None, description='Specific creative asset (if feedback is creative-specific)', min_length=1
    )
    metric_type: MetricType | None = Field(
        'overall_performance', description='The business metric being measured'
    )
    feedback_source: FeedbackSource | None = Field(
        'buyer_attribution', description='Source of the performance data'
    )
    context: dict[str, Any] | None = Field(
        None,
        description='Initiator-provided context included in the request payload. Agentsmust echo this value back unchanged in responses and webhooks. Use for UI/session hints, correlation tokens, or tracking metadata.',
    )
