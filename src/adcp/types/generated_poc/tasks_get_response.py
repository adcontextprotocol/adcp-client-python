# generated by datamodel-codegen:
#   filename:  tasks-get-response.json
#   timestamp: 2025-11-15T17:41:27+00:00

from __future__ import annotations

from enum import Enum
from typing import Any

from adcp.types.base import AdCPBaseModel
from pydantic import AwareDatetime, ConfigDict, Field


class Domain(Enum):
    media_buy = 'media-buy'
    signals = 'signals'


class Progress(AdCPBaseModel):
    model_config = ConfigDict(
        extra='forbid',
    )
    percentage: float | None = Field(
        None, description='Completion percentage (0-100)', ge=0.0, le=100.0
    )
    current_step: str | None = Field(None, description='Current step or phase of the operation')
    total_steps: int | None = Field(
        None, description='Total number of steps in the operation', ge=1
    )
    step_number: int | None = Field(None, description='Current step number', ge=1)


class Details(AdCPBaseModel):
    model_config = ConfigDict(
        extra='allow',
    )
    domain: Domain | None = Field(None, description='AdCP domain where error occurred')
    operation: str | None = Field(None, description='Specific operation that failed')
    specific_context: dict[str, Any] | None = Field(
        None, description='Domain-specific error context'
    )


class Error(AdCPBaseModel):
    model_config = ConfigDict(
        extra='forbid',
    )
    code: str = Field(..., description='Error code for programmatic handling')
    message: str = Field(..., description='Detailed error message')
    details: Details | None = Field(None, description='Additional error context')


class Type(Enum):
    request = 'request'
    response = 'response'


class HistoryItem(AdCPBaseModel):
    model_config = ConfigDict(
        extra='forbid',
    )
    timestamp: AwareDatetime = Field(..., description='When this exchange occurred (ISO 8601)')
    type: Type = Field(
        ..., description='Whether this was a request from client or response from server'
    )
    data: dict[str, Any] = Field(..., description='The full request or response payload')


class TaskType(Enum):
    create_media_buy = 'create_media_buy'
    update_media_buy = 'update_media_buy'
    sync_creatives = 'sync_creatives'
    activate_signal = 'activate_signal'
    get_signals = 'get_signals'


class TaskStatus(Enum):
    submitted = 'submitted'
    working = 'working'
    input_required = 'input-required'
    completed = 'completed'
    canceled = 'canceled'
    failed = 'failed'
    rejected = 'rejected'
    auth_required = 'auth-required'
    unknown = 'unknown'


class TasksGetResponse(AdCPBaseModel):
    model_config = ConfigDict(
        extra='forbid',
    )
    task_id: str = Field(..., description='Unique identifier for this task')
    task_type: TaskType = Field(..., description='Type of AdCP operation')
    domain: Domain = Field(..., description='AdCP domain this task belongs to')
    status: TaskStatus = Field(..., description='Current task status')
    created_at: AwareDatetime = Field(
        ..., description='When the task was initially created (ISO 8601)'
    )
    updated_at: AwareDatetime = Field(..., description='When the task was last updated (ISO 8601)')
    completed_at: AwareDatetime | None = Field(
        None,
        description='When the task completed (ISO 8601, only for completed/failed/canceled tasks)',
    )
    has_webhook: bool | None = Field(
        None, description='Whether this task has webhook configuration'
    )
    progress: Progress | None = Field(
        None, description='Progress information for long-running tasks'
    )
    error: Error | None = Field(None, description='Error details for failed tasks')
    history: list[HistoryItem] | None = Field(
        None,
        description='Complete conversation history for this task (only included if include_history was true in request)',
    )
    context: dict[str, Any] | None = Field(
        None,
        description='Initiator-provided context echoed inside the task payload. Opaque metadata such as UI/session hints, correlation tokens, or tracking identifiers.',
    )
