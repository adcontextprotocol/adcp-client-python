{
  "$id": "/schemas/2.4.0/core/delivery-metrics.json",
  "$schema": "http://json-schema.org/draft-07/schema#",
  "additionalProperties": true,
  "description": "Standard delivery metrics that can be reported at media buy, package, or creative level",
  "properties": {
    "clicks": {
      "description": "Total clicks",
      "minimum": 0,
      "type": "number"
    },
    "completed_views": {
      "description": "100% completions (for CPCV)",
      "minimum": 0,
      "type": "number"
    },
    "completion_rate": {
      "description": "Completion rate (completed_views/impressions)",
      "maximum": 1,
      "minimum": 0,
      "type": "number"
    },
    "conversions": {
      "description": "Conversions (reserved for future CPA pricing support)",
      "minimum": 0,
      "type": "number"
    },
    "ctr": {
      "description": "Click-through rate (clicks/impressions)",
      "maximum": 1,
      "minimum": 0,
      "type": "number"
    },
    "dooh_metrics": {
      "additionalProperties": false,
      "description": "DOOH-specific metrics (only included for DOOH campaigns)",
      "properties": {
        "calculation_notes": {
          "description": "Explanation of how DOOH impressions were calculated",
          "type": "string"
        },
        "loop_plays": {
          "description": "Number of times ad played in rotation",
          "minimum": 0,
          "type": "integer"
        },
        "screen_time_seconds": {
          "description": "Total display time in seconds",
          "minimum": 0,
          "type": "integer"
        },
        "screens_used": {
          "description": "Number of unique screens displaying the ad",
          "minimum": 0,
          "type": "integer"
        },
        "sov_achieved": {
          "description": "Actual share of voice delivered (0.0 to 1.0)",
          "maximum": 1,
          "minimum": 0,
          "type": "number"
        },
        "venue_breakdown": {
          "description": "Per-venue performance breakdown",
          "items": {
            "additionalProperties": false,
            "properties": {
              "impressions": {
                "description": "Impressions delivered at this venue",
                "minimum": 0,
                "type": "integer"
              },
              "loop_plays": {
                "description": "Loop plays at this venue",
                "minimum": 0,
                "type": "integer"
              },
              "screens_used": {
                "description": "Number of screens used at this venue",
                "minimum": 0,
                "type": "integer"
              },
              "venue_id": {
                "description": "Venue identifier",
                "type": "string"
              },
              "venue_name": {
                "description": "Human-readable venue name",
                "type": "string"
              },
              "venue_type": {
                "description": "Venue type (e.g., 'airport', 'transit', 'retail', 'billboard')",
                "type": "string"
              }
            },
            "required": [
              "venue_id",
              "impressions"
            ],
            "type": "object"
          },
          "type": "array"
        }
      },
      "type": "object"
    },
    "frequency": {
      "description": "Average frequency per individual (typically measured over campaign duration, but can vary by measurement provider)",
      "minimum": 0,
      "type": "number"
    },
    "grps": {
      "description": "Gross Rating Points delivered (for CPP)",
      "minimum": 0,
      "type": "number"
    },
    "impressions": {
      "description": "Impressions delivered",
      "minimum": 0,
      "type": "number"
    },
    "leads": {
      "description": "Leads generated (reserved for future CPL pricing support)",
      "minimum": 0,
      "type": "number"
    },
    "quartile_data": {
      "description": "Video quartile completion data",
      "properties": {
        "q1_views": {
          "description": "25% completion views",
          "minimum": 0,
          "type": "number"
        },
        "q2_views": {
          "description": "50% completion views",
          "minimum": 0,
          "type": "number"
        },
        "q3_views": {
          "description": "75% completion views",
          "minimum": 0,
          "type": "number"
        },
        "q4_views": {
          "description": "100% completion views",
          "minimum": 0,
          "type": "number"
        }
      },
      "type": "object"
    },
    "reach": {
      "description": "Unique reach - units depend on measurement provider (e.g., individuals, households, devices, cookies). See delivery_measurement.provider for methodology.",
      "minimum": 0,
      "type": "number"
    },
    "spend": {
      "description": "Amount spent",
      "minimum": 0,
      "type": "number"
    },
    "views": {
      "description": "Views at threshold (for CPV)",
      "minimum": 0,
      "type": "number"
    }
  },
  "title": "Delivery Metrics",
  "type": "object"
}