{
  "$id": "/schemas/v1/core/tasks-get-response.json",
  "$schema": "http://json-schema.org/draft-07/schema#",
  "additionalProperties": false,
  "description": "Response containing detailed information about a specific task including status and optional conversation history across all AdCP domains",
  "properties": {
    "completed_at": {
      "description": "When the task completed (ISO 8601, only for completed/failed/canceled tasks)",
      "format": "date-time",
      "type": "string"
    },
    "context": {
      "additionalProperties": true,
      "description": "Initiator-provided context echoed inside the task payload. Opaque metadata such as UI/session hints, correlation tokens, or tracking identifiers.",
      "type": "object"
    },
    "created_at": {
      "description": "When the task was initially created (ISO 8601)",
      "format": "date-time",
      "type": "string"
    },
    "domain": {
      "description": "AdCP domain this task belongs to",
      "enum": [
        "media-buy",
        "signals"
      ],
      "type": "string"
    },
    "error": {
      "additionalProperties": false,
      "description": "Error details for failed tasks",
      "properties": {
        "code": {
          "description": "Error code for programmatic handling",
          "type": "string"
        },
        "details": {
          "additionalProperties": true,
          "description": "Additional error context",
          "properties": {
            "domain": {
              "description": "AdCP domain where error occurred",
              "enum": [
                "media-buy",
                "signals"
              ],
              "type": "string"
            },
            "operation": {
              "description": "Specific operation that failed",
              "type": "string"
            },
            "specific_context": {
              "additionalProperties": true,
              "description": "Domain-specific error context",
              "type": "object"
            }
          },
          "type": "object"
        },
        "message": {
          "description": "Detailed error message",
          "type": "string"
        }
      },
      "required": [
        "code",
        "message"
      ],
      "type": "object"
    },
    "has_webhook": {
      "description": "Whether this task has webhook configuration",
      "type": "boolean"
    },
    "history": {
      "description": "Complete conversation history for this task (only included if include_history was true in request)",
      "items": {
        "additionalProperties": false,
        "properties": {
          "data": {
            "additionalProperties": true,
            "description": "The full request or response payload",
            "type": "object"
          },
          "timestamp": {
            "description": "When this exchange occurred (ISO 8601)",
            "format": "date-time",
            "type": "string"
          },
          "type": {
            "description": "Whether this was a request from client or response from server",
            "enum": [
              "request",
              "response"
            ],
            "type": "string"
          }
        },
        "required": [
          "timestamp",
          "type",
          "data"
        ],
        "type": "object"
      },
      "type": "array"
    },
    "progress": {
      "additionalProperties": false,
      "description": "Progress information for long-running tasks",
      "properties": {
        "current_step": {
          "description": "Current step or phase of the operation",
          "type": "string"
        },
        "percentage": {
          "description": "Completion percentage (0-100)",
          "maximum": 100,
          "minimum": 0,
          "type": "number"
        },
        "step_number": {
          "description": "Current step number",
          "minimum": 1,
          "type": "integer"
        },
        "total_steps": {
          "description": "Total number of steps in the operation",
          "minimum": 1,
          "type": "integer"
        }
      },
      "type": "object"
    },
    "status": {
      "$ref": "/schemas/v1/enums/task-status.json",
      "description": "Current task status"
    },
    "task_id": {
      "description": "Unique identifier for this task",
      "type": "string"
    },
    "task_type": {
      "$ref": "/schemas/v1/enums/task-type.json",
      "description": "Type of AdCP operation"
    },
    "updated_at": {
      "description": "When the task was last updated (ISO 8601)",
      "format": "date-time",
      "type": "string"
    }
  },
  "required": [
    "task_id",
    "task_type",
    "domain",
    "status",
    "created_at",
    "updated_at"
  ],
  "title": "Tasks Get Response",
  "type": "object"
}