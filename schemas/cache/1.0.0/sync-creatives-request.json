{
  "$id": "/schemas/v1/media-buy/sync-creatives-request.json",
  "$schema": "http://json-schema.org/draft-07/schema#",
  "additionalProperties": false,
  "description": "Request parameters for syncing creative assets with upsert semantics - supports bulk operations, patch updates, and assignment management",
  "examples": [
    {
      "data": {
        "assignments": {
          "hero_video_30s": [
            "pkg_ctv_001",
            "pkg_ctv_002"
          ]
        },
        "creatives": [
          {
            "assets": {
              "video": {
                "duration_ms": 30000,
                "height": 1080,
                "url": "https://cdn.example.com/hero-video.mp4",
                "width": 1920
              }
            },
            "creative_id": "hero_video_30s",
            "format_id": {
              "agent_url": "https://creative.adcontextprotocol.org",
              "id": "video_standard_30s"
            },
            "name": "Brand Hero Video 30s",
            "tags": [
              "q1_2024",
              "video"
            ]
          }
        ]
      },
      "description": "Full sync with hosted video creative"
    },
    {
      "data": {
        "creatives": [
          {
            "assets": {
              "generation_prompt": {
                "content": "Create a warm, festive holiday campaign featuring winter products"
              },
              "promoted_offerings": {
                "brand_manifest": {
                  "colors": {
                    "primary": "#C41E3A",
                    "secondary": "#165B33"
                  },
                  "url": "https://retailer.com"
                }
              }
            },
            "creative_id": "holiday_hero",
            "format_id": {
              "agent_url": "https://publisher.com/.well-known/adcp/sales",
              "id": "premium_bespoke_display"
            },
            "name": "Holiday Campaign Hero",
            "tags": [
              "holiday",
              "q4_2024"
            ]
          }
        ]
      },
      "description": "Generative creative with approval"
    }
  ],
  "properties": {
    "assignments": {
      "additionalProperties": false,
      "description": "Optional bulk assignment of creatives to packages",
      "patternProperties": {
        "^[a-zA-Z0-9_-]+$": {
          "description": "Array of package IDs to assign this creative to",
          "items": {
            "type": "string"
          },
          "type": "array"
        }
      },
      "type": "object"
    },
    "context": {
      "additionalProperties": true,
      "description": "Initiator-provided context included in the request payload. Agents must echo this value back unchanged in responses and webhooks. Use for UI/session hints, correlation tokens, or tracking metadata.",
      "type": "object"
    },
    "creatives": {
      "description": "Array of creative assets to sync (create or update)",
      "items": {
        "$ref": "creative-asset.json"
      },
      "maxItems": 100,
      "type": "array"
    },
    "delete_missing": {
      "default": false,
      "description": "When true, creatives not included in this sync will be archived. Use with caution for full library replacement.",
      "type": "boolean"
    },
    "dry_run": {
      "default": false,
      "description": "When true, preview changes without applying them. Returns what would be created/updated/deleted.",
      "type": "boolean"
    },
    "patch": {
      "default": false,
      "description": "When true, only provided fields are updated (partial update). When false, entire creative is replaced (full upsert).",
      "type": "boolean"
    },
    "push_notification_config": {
      "$ref": "push-notification-config.json",
      "description": "Optional webhook configuration for async sync notifications. Publisher will send webhook when sync completes if operation takes longer than immediate response time (typically for large bulk operations or manual approval/HITL)."
    },
    "validation_mode": {
      "$ref": "validation-mode.json",
      "default": "strict",
      "description": "Validation strictness. 'strict' fails entire sync on any validation error. 'lenient' processes valid creatives and reports errors."
    }
  },
  "required": [
    "creatives"
  ],
  "title": "Sync Creatives Request",
  "type": "object"
}