{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "/schemas/v1/core/targeting.json",
  "title": "Targeting Overlay",
  "description": "Optional geographic refinements for media buys. Most targeting should be expressed in the brief and handled by the publisher. These fields are primarily for geographic restrictions (RCT testing, regulatory compliance).",
  "type": "object",
  "properties": {
    "geo_country_any_of": {
      "type": "array",
      "description": "Restrict delivery to specific countries (ISO codes). Use for regulatory compliance or RCT testing.",
      "items": {
        "type": "string",
        "pattern": "^[A-Z]{2}$"
      }
    },
    "geo_region_any_of": {
      "type": "array",
      "description": "Restrict delivery to specific regions/states. Use for regulatory compliance or RCT testing.",
      "items": {
        "type": "string"
      }
    },
    "geo_metro_any_of": {
      "type": "array",
      "description": "Restrict delivery to specific metro areas (DMA codes). Use for regulatory compliance or RCT testing.",
      "items": {
        "type": "string"
      }
    },
    "geo_postal_code_any_of": {
      "type": "array",
      "description": "Restrict delivery to specific postal/ZIP codes. Use for regulatory compliance or RCT testing.",
      "items": {
        "type": "string"
      }
    },
    "axe_include_segment": {
      "type": "string",
      "description": "AXE segment ID to include for targeting"
    },
    "axe_exclude_segment": {
      "type": "string",
      "description": "AXE segment ID to exclude from targeting"
    },
    "frequency_cap": {
      "$ref": "frequency-cap.json"
    }
  },
  "additionalProperties": false
}