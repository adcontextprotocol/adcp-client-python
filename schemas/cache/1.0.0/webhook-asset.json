{
  "$id": "/schemas/v1/core/assets/webhook-asset.json",
  "$schema": "http://json-schema.org/draft-07/schema#",
  "additionalProperties": false,
  "description": "Webhook for server-side dynamic content rendering (DCO)",
  "properties": {
    "method": {
      "$ref": "http-method.json",
      "default": "POST",
      "description": "HTTP method"
    },
    "required_macros": {
      "description": "Universal macros that must be provided for webhook to function",
      "items": {
        "type": "string"
      },
      "type": "array"
    },
    "response_type": {
      "$ref": "webhook-response-type.json",
      "description": "Expected content type of webhook response"
    },
    "security": {
      "description": "Security configuration for webhook calls",
      "properties": {
        "api_key_header": {
          "description": "Header name for API key (e.g., 'X-API-Key')",
          "type": "string"
        },
        "hmac_header": {
          "description": "Header name for HMAC signature (e.g., 'X-Signature')",
          "type": "string"
        },
        "method": {
          "$ref": "webhook-security-method.json",
          "description": "Authentication method"
        }
      },
      "required": [
        "method"
      ],
      "type": "object"
    },
    "supported_macros": {
      "description": "Universal macros that can be passed to webhook (e.g., {DEVICE_TYPE}, {COUNTRY})",
      "items": {
        "type": "string"
      },
      "type": "array"
    },
    "timeout_ms": {
      "default": 500,
      "description": "Maximum time to wait for response in milliseconds",
      "maximum": 5000,
      "minimum": 10,
      "type": "integer"
    },
    "url": {
      "description": "Webhook URL to call for dynamic content",
      "format": "uri",
      "type": "string"
    }
  },
  "required": [
    "url",
    "response_type",
    "security"
  ],
  "title": "Webhook Asset",
  "type": "object"
}